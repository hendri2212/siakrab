import{W as y,r as l,j as e,n}from"./app-1abff991.js";import{D as r}from"./Draft-a4c6aff9.js";import{B as c}from"./Button-41989ba7.js";import{M as k}from"./Modal-d1fc485f.js";import I from"./Form-b68712d8.js";import{L as j}from"./Loading-f3e3b1f4.js";import{a as O,F as R,b as z}from"./index.esm-d47dd636.js";import{I as A}from"./index.esm-ee10d79b.js";import{B as H}from"./index.esm-7009594e.js";import{D as J,a as L,B as T,M as W,b as G,d as K,e as U,f}from"./dropdown-menu-86da1dd9.js";import"./transition-dbf23572.js";/* empty css                            */import"./TextInput-41877d7c.js";import"./InputError-79c2b369.js";import"./index.esm-bb6d21a8.js";import"./iconBase-d7a64011.js";import"./index.esm-50f203ce.js";function le({row:g}){const s=g.original,{data:S,setData:o,post:d,processing:m,errors:w,reset:b}=y({judul:"",konten:"",gambar:null}),[D,a]=l.useState(!1),[p,u]=l.useState(r.EditorState.createEmpty()),[x,h]=l.useState(""),N=p.getCurrentContent(),C=JSON.stringify(r.convertToRaw(N));function E(t){u(t),o("konten",C)}function B(){h("update"),a(!0),o({judul:s.judul});const t=JSON.parse(s.konten),i=r.convertFromRaw(t);u(r.EditorState.createWithContent(i))}function M(t){t.preventDefault(),d(route("news.update",s.id),{onSuccess:()=>{n.success("Berhasil mengupdate data berita."),a(!1),b()},onError:i=>{n.error("Gagal mengupdate data berita."),console.log(i)}})}function v(){h("delete"),a(!0)}function F(){d(route("news.delete",s.id),{onSuccess:()=>{n.success("Berhasil menghapus berita."),a(!1)},onError:t=>{n.error("Gagal menghapus berita."),console.log(t)}})}return e.jsxs(e.Fragment,{children:[e.jsxs(J,{children:[e.jsx(L,{asChild:!0,children:e.jsxs(T,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(W,{className:"h-4 w-4"})]})}),e.jsxs(G,{align:"end",children:[e.jsx(K,{children:"Actions"}),e.jsx(U,{}),e.jsx(f,{onClick:B,children:"Edit Data"}),e.jsx(f,{onClick:v,children:"Delete Data"})]})]}),e.jsxs(k,{show:D,onClose:()=>a(!1),children:[x==="update"&&e.jsxs(e.Fragment,{children:[e.jsxs("h1",{className:"font-semibold text-xl mb-10 flex items-center gap-x-3",children:[e.jsx(O,{size:25}),e.jsx("span",{children:"Edit Berita"})]}),e.jsxs("form",{onSubmit:M,children:[e.jsx(I,{...S,errors:w,editorState:p,handleEditorStateChange:E,setData:o,news:s}),e.jsx("div",{className:"mt-5",children:m?e.jsx(j,{}):e.jsx(c,{variant:"primary",text:"Simpan",icon:e.jsx(R,{}),className:"w-full"})})]})]}),x==="delete"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-10",children:[e.jsxs("h1",{className:"font-semibold text-xl flex items-center gap-x-3",children:[e.jsx(A,{size:25}),e.jsx("span",{children:"Hapus Berita"})]}),e.jsxs("p",{className:"mt-3",children:["Konfirmasi hapus berita"," ",e.jsx("span",{className:"text-primary",children:s.judul}),"?"]})]}),e.jsx("div",{className:"flex gap-x-3 mt-10",children:m?e.jsx(j,{}):e.jsxs(e.Fragment,{children:[e.jsx(c,{type:"button",text:"Batal",icon:e.jsx(H,{}),className:"w-full border hover:bg-gray-100",onClick:()=>a(!1)}),e.jsx(c,{type:"button",variant:"primary",text:"Hapus",icon:e.jsx(z,{}),className:"w-full",onClick:F})]})})]})]})]})}export{le as default};
