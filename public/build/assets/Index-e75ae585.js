import{r as l,W as G,j as e,n as S}from"./app-1abff991.js";import{A as W}from"./AdminLayout-2f6fd879.js";import{B as z}from"./Button-41989ba7.js";import{M as q}from"./Modal-d1fc485f.js";import{S as p}from"./SelectInput-6e6f8ef3.js";import{T as h}from"./TextInput-41877d7c.js";import{T as J}from"./TextArea-ce19fe4d.js";import{L as O}from"./Loading-f3e3b1f4.js";import{I as i}from"./InputError-79c2b369.js";import{C}from"./Checkbox-b6000747.js";import{F as Q}from"./index.esm-d47dd636.js";import{B as u}from"./index.esm-50f203ce.js";import{T}from"./index.esm-bb6d21a8.js";import{DataTable as V}from"./DataTable-5c783c07.js";import{l as X}from"./index-889a8686.js";import"./Sidebar-a7638bcc.js";import"./truncateText-0efa5ecd.js";import"./index.esm-7009594e.js";import"./iconBase-d7a64011.js";import"./index.esm-b9ae67de.js";import"./index.esm-297e406a.js";import"./transition-dbf23572.js";import"./table-081ac3df.js";import"./dropdown-menu-86da1dd9.js";import"./Columns-1fb475c6.js";import"./formatRupiah-c70df3af.js";import"./RowActions-5a38e78a.js";import"./canvasPreview-f20b28ba.js";import"./index.esm-ee10d79b.js";import"./checkbox-15aaa6e3.js";function we({auth:w,listProductsUMKM:P}){const[_,j]=l.useState(!1),{data:n,setData:s,post:H,processing:F,errors:t,reset:A}=G({kategori:"",thumbnail:null,images:null,nama:"",deskripsi:"",harga_start:"",harga_end:"",harga_fix:"",detail:{}}),[g,f]=l.useState("Pilih Kategori"),[o,x]=l.useState(""),[m,v]=l.useState(null),[D,b]=l.useState(""),[c,K]=l.useState([]),[R,I]=l.useState([]);function M(a){const r=a.target.files[0];if(s("thumbnail",r),r){const d=new FileReader;d.onload=y=>{v(y.target.result)},d.readAsDataURL(r),b(r.name)}}const L=a=>{const r=a.target.files;if(s("images",r),r){const d=[];[...r].forEach(N=>{const k=new FileReader;k.onload=E=>{d.push(E.target.result),I(B=>[...B,N.name])},k.readAsDataURL(N)}),K(d)}};function U(a){a.preventDefault(),H(route("productUMKM.store"),{onSuccess:()=>{S.success("Berhasil menyimpan data produk."),j(!1),A(),f("Pilih Kategori"),v(null),b(""),x("")},onError:()=>{S.error("Gagal menyimpan data produk")}})}return e.jsxs(W,{auth:w,children:[e.jsx("div",{className:"max-w-[75vw] overflow-auto",children:e.jsx(V,{data:P})}),e.jsxs(q,{maxWidth:"lg",show:_,onClose:()=>j(!1),children:[e.jsx("h1",{className:"font-semibold text-xl mb-10 flex items-center gap-x-3",children:e.jsxs(e.Fragment,{children:[e.jsx(u,{size:25}),e.jsx("span",{children:"Tambah Produk"})]})}),e.jsxs("form",{onSubmit:U,className:"flex flex-col gap-y-5",children:[e.jsxs("div",{children:[e.jsxs(p,{children:[e.jsx(p.Trigger,{label:"Kategori Produk",selected:g!=="Pilih Kategori",children:e.jsx("div",{className:g==="Pilih Kategori"?"text-gray-500":"",children:g})}),e.jsx(p.Content,{positionClass:"top-12",children:e.jsx("div",{className:"max-h-[12rem] overflow-auto",children:e.jsx("ul",{children:X.map((a,r)=>e.jsx("li",{className:"py-2 rounded-md cursor-pointer hover:bg-gray-100 hover:px-4 duration-300",onClick:()=>{f(a),s("kategori",a)},children:a},r))})})})]}),e.jsx(i,{message:t.kategori})]}),e.jsxs("div",{children:[e.jsxs("label",{children:[e.jsx("div",{className:"rounded-md border border-dashed border-gray-300 h-[4rem] w-full flex justify-center items-center cursor-pointer hover:bg-gray-50 duration-300",children:e.jsxs("div",{className:"flex items-center gap-x-3 text-gray-500",children:[m?e.jsx(T,{}):e.jsx(u,{}),e.jsxs("span",{children:[m?"Ganti":"Upload"," Gambar (Thumbnail)"]})]})}),e.jsx("input",{type:"file",hidden:!0,onChange:M})]}),e.jsx(i,{message:t.thumbnail}),m&&e.jsx("div",{className:"p-3 border rounded-md mt-3",children:e.jsxs("div",{className:"h-[5rem] flex gap-x-5",children:[e.jsx("div",{children:e.jsx("img",{src:m,alt:"Preview",className:"h-full"})}),e.jsx("p",{className:"text-gray-500",children:D})]})})]}),e.jsxs("div",{children:[e.jsxs("label",{children:[e.jsx("div",{className:"rounded-md border border-dashed border-gray-300 h-[4rem] w-full flex justify-center items-center cursor-pointer hover:bg-gray-50 duration-300",children:e.jsxs("div",{className:"flex items-center gap-x-3 text-gray-500",children:[c.length>0?e.jsx(T,{}):e.jsx(u,{}),e.jsxs("span",{children:[c.length>0?"Ganti":"Upload"," ","Gambar Lainnya"]})]})}),e.jsx("input",{type:"file",hidden:!0,onChange:L,multiple:!0})]}),e.jsx(i,{message:t.images}),c.length>0&&c.map((a,r)=>e.jsx("div",{className:"p-3 border rounded-md mt-3",children:e.jsxs("div",{className:"h-[5rem] flex gap-x-5",children:[e.jsx("div",{children:e.jsx("img",{src:a,alt:"Preview",className:"h-full"})}),e.jsx("p",{className:"text-gray-500",children:R[r]})]})},r))]}),e.jsxs("div",{children:[e.jsx(h,{label:"Nama Produk",placeholder:"Nama Produk",value:n.nama,onChange:a=>s("nama",a.target.value)}),e.jsx(i,{message:t.nama})]}),e.jsxs("div",{children:[e.jsx(J,{label:"Deskripsi",placeholder:"Deskripsi",value:n.deskripsi,onChange:a=>s("deskripsi",a.target.value)}),e.jsx(i,{message:t.deskripsi})]}),e.jsxs("div",{className:"flex gap-x-5",children:[e.jsxs("div",{className:"flex items-center gap-x-3",children:[e.jsx(C,{id:"hargaRange",checked:o==="range",onChange:()=>x("range")}),e.jsx("label",{htmlFor:"hargaRange",children:"Harga Range"})]}),e.jsxs("div",{className:"flex items-center gap-x-3",children:[e.jsx(C,{id:"hargaFix",checked:o==="fix",onChange:()=>x("fix")}),e.jsx("label",{htmlFor:"hargaFix",children:"Harga Tetap"})]})]}),e.jsxs("div",{children:[o!==""&&e.jsx("p",{children:"Rp. "}),o==="range"&&e.jsxs("section",{className:"grid grid-cols-2 gap-5",children:[e.jsx(h,{type:"number",label:"Dari Harga",placeholder:"Dari Harga",value:n.harga_start,onChange:a=>s("harga_start",a.target.value)}),e.jsx(i,{message:t.harga_start}),e.jsx(h,{type:"number",label:"Hingga Harga",placeholder:"Hingga Harga",value:n.harga_end,onChange:a=>s("harga_end",a.target.value)}),e.jsx(i,{message:t.harga_end})]}),o==="fix"&&e.jsxs(e.Fragment,{children:[e.jsx(h,{type:"number",label:"Harga Produk",placeholder:"Harga Produk",value:n.harga_fix,onChange:a=>s("harga_fix",a.target.value)}),e.jsx(i,{message:t.harga_fix})]})]}),F?e.jsx(O,{}):e.jsx(z,{variant:"primary",text:"Simpan",icon:e.jsx(Q,{})})]})]})]})}export{we as default};
